在Godot中实现鼠标穿透，需要借助于C#代码。在下面的桌宠项目里面就使用到了这项功能。
https://github.com/gwtt/-/tree/master

```CS
using Godot;
using System;

public partial class WindowClickThroughManager : Node
{
	[System.Runtime.InteropServices.DllImport("user32.dll")]
	public static extern System.IntPtr GetActiveWindow();
	[System.Runtime.InteropServices.DllImport("user32.dll")]
	private static extern int SetWindowLong(System.IntPtr hWnd, int nIndex, int dwNewLong);

	private bool hotkeyRegistered = false;
	private const int k_gwlExStyle = -20;
	private const int k_wsExLayered = 0x00080000;
	private const int k_wsExTransparent = 0x00000020;
	private System.IntPtr windowHandle;
	private bool _currentClickThrough;

	public override void _Ready()
	{
		windowHandle = GetActiveWindow();
		SetWindowLong(windowHandle, k_gwlExStyle, k_wsExLayered | k_wsExTransparent);
	}

	public void SetClickThrough(bool clickThrough)
	{
		if (clickThrough == _currentClickThrough)
			// 状态没变，不必再调用
			return;

		_currentClickThrough = clickThrough;

		if (clickThrough) {
			SetWindowLong(windowHandle, k_gwlExStyle, k_wsExLayered | k_wsExTransparent);
		} else {
			SetWindowLong(windowHandle, k_gwlExStyle, k_wsExLayered);
		}
	}
}
```

然后就可以快乐的写到一个全局变量去使用它。

```GDScript
extends Node

func detect_pass_through():
	var viewport = get_viewport()
	var img = viewport.get_texture().get_image()
	var rect = viewport.get_visible_rect()
	var mouse_position = viewport.get_mouse_position()
	var view_x = int((int(mouse_position.x) + rect.position.x))
	var view_y = int((int(mouse_position.y) + rect.position.y))

	var x = (int)(img.get_size().x * view_x / rect.size.x)
	var y = (int)(img.get_size().y * view_y / rect.size.y)

	if x < img.get_size().x && x >= 0 && y < img.get_size().y && y >= 0:
		var pixel = img.get_pixel(x, y)
		if pixel.a > 0.5:
			set_click_ability(true)
		else:
			set_click_ability(false)


var click_through = true
func set_click_ability(clickable: bool):
	if clickable != click_through:
		click_through = clickable
		WindowClickThroughManager.SetClickThrough(!clickable)
```

然后接下来就是去调用和判断，具体我们无需写在process里面每帧或者每秒去判断，会导致窗口的穿透性不停的重写和切换，比较耗性能。所以可以加个时间和上述代码有个缓存操作，实际下来不会有多少内存泄露啥问题。
```GDScript
extends Node2D

# 检查穿透时间
@export var DETECT_TIME = 0.1

func _physics_process(_delta: float) -> void:
	detect_time += _delta
	if detect_time >= DETECT_TIME:
		detect_time = 0
		SystemWindowManager.detect_pass_through()
```